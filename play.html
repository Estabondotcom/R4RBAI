<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>R4RB — Play</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <button class="tray-toggle" id="trayToggle" title="Character & Sheets">☰</button>

  <aside class="tray" id="tray">
    <div class="tabs" id="tabs">
      <button data-tab="skills" class="active">Skills</button>
      <button data-tab="inv">Inventory</button>
      <button data-tab="health">Character</button>
    </div>
    <div class="panel" id="panel-skills"></div>
    <div class="panel" id="panel-inv" style="display:none">
      <div class="muted">Pack</div>
      <div id="invList" class="tiny" style="margin-top:6px"></div>
    </div>
    <div class="panel" id="panel-health" style="display:none">
      <div class="portrait tiny" id="portrait">Portrait</div>
      <div class="row" style="margin-top:8px">
        <span class="muted">Wounds</span>
        <div class="health" id="wounds"></div>
      </div>
      <div class="row">
        <span class="muted">Luck</span>
        <div class="health" id="luck"></div>
      </div>
      <div class="tiny muted" style="margin-top:8px">Statuses</div>
      <div id="statuses" class="tiny"></div>
    </div>
  </aside>

  <main class="app">
    <section class="top" id="bookWrapper">
      <div class="book-header">
        <div class="row">
          <div class="chapter">Chapter One • In medias res</div>
          <label class="tiny scrolllock"><input type="checkbox" id="scrollLock" /> Scroll lock</label>
        </div>
      </div>
      <div class="book" id="book"></div>
    </section>

    <section class="bottom">
      <div class="messages" id="dockMessages" aria-live="polite"></div>
      <div class="dock">
        <div class="inputRow">
          <textarea id="userInput" placeholder="Say what you do… (OOC questions welcome)"></textarea>
          <button id="sendBtn">Send</button>
        </div>
      </div>
      <div class="row">
        <span class="tiny muted">Model: GPT-4o via Firebase Functions • Max narrative ~250 words</span>
        <span class="chip" id="rollHint" style="display:none">Roll required</span>
      </div>
    </section>
  </main>

  <!-- Auth guard BEFORE play.js -->
  <!-- Auth guard BEFORE play.js -->
  <script type="module" src="auth-guard.js"></script>
  <script type="module" src="play.js"></script>
</body>
</html>
